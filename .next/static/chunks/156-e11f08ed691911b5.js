"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{37773:function(t,e,i){var r;"undefined"!=typeof self&&self,t.exports=(r=i(64090),function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){function r(){return(r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HighchartsReact",function(){return h});var o=i(1),a=i.n(o),l=o.useLayoutEffect,h=Object(o.memo)(Object(o.forwardRef)(function(t,e){var i=Object(o.useRef)(),h=Object(o.useRef)(),u=Object(o.useRef)(t.constructorType),c=Object(o.useRef)(t.highcharts);return l(function(){function e(){var e=t.highcharts||"object"===s(window)&&window.Highcharts,r=t.constructorType||"chart";e?e[r]?t.options?h.current=e[r](i.current,t.options,t.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(h.current){if(!1!==t.allowChartUpdate){if(t.constructorType!==u.current||t.highcharts!==c.current)u.current=t.constructorType,c.current=t.highcharts,e();else if(!t.immutable&&h.current){var r,o;(r=h.current).update.apply(r,[t.options].concat(function(t){if(Array.isArray(t))return n(t)}(o=t.updateArgs||[!0,!0])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}else e()}}else e()},[t.options,t.allowChartUpdate,t.updateArgs,t.containerProps,t.highcharts,t.constructorType]),l(function(){return function(){h.current&&(h.current.destroy(),h.current=null)}},[]),Object(o.useImperativeHandle)(e,function(){return{get chart(){return h.current},container:i}},[]),a.a.createElement("div",r({},t.containerProps,{ref:i}))}));e.default=h},function(t,e){t.exports=r}]))},30450:function(t){t.exports=function(){function t(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function e(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e){n(t,0,t.children.length,e,t)}function n(t,e,i,r,n){n||(n=d(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=e;o<i;o++){var a=t.children[o];s(n,t.leaf?r(a):a)}return n}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function a(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(i,r,n,s,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=s)){var l=r+Math.ceil((n-r)/s/2)*s;(function e(i,r,n,s,o){for(;s>n;){if(s-n>600){var a=s-n+1,l=r-n+1,h=Math.log(a),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(a-u)/a)*(l-a/2<0?-1:1),d=Math.max(n,Math.floor(r-l*u/a+c)),g=Math.min(s,Math.floor(r+(a-l)*u/a+c));e(i,r,d,g,o)}var f=i[r],_=n,p=s;for(t(i,n,r),o(i[s],f)>0&&t(i,n,s);_<p;){for(t(i,_,p),_++,p--;0>o(i[_],f);)_++;for(;o(i[p],f)>0;)p--}0===o(i[n],f)?t(i,n,p):t(i,++p,s),p<=r&&(n=p+1),r<=p&&(s=p-1)}})(i,l,r||0,n||i.length-1,o||e),a.push(r,l,l,n)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,i=[];if(!c(t,e))return i;for(var r=this.toBBox,n=[];e;){for(var s=0;s<e.children.length;s++){var o=e.children[s],a=e.leaf?r(o):o;c(t,a)&&(e.leaf?i.push(o):u(t,a)?this._all(o,i):n.push(o))}e=n.pop()}return i},i.prototype.collides=function(t){var e=this.data;if(!c(t,e))return!1;for(var i=[];e;){for(var r=0;r<e.children.length;r++){var n=e.children[r],s=e.leaf?this.toBBox(n):n;if(c(t,s)){if(e.leaf||u(t,s))return!0;i.push(n)}}e=i.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}}else this.data=i;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var i,r,n,s=this.data,o=this.toBBox(t),a=[],l=[];s||a.length;){if(s||(s=a.pop(),r=a[a.length-1],i=l.pop(),n=!0),s.leaf){var h=function(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return -1}(t,s.children,e);if(-1!==h)return s.children.splice(h,1),a.push(s),this._condense(a),this}n||s.leaf||!u(s,o)?r?(i++,s=r.children[i],n=!1):s=null:(a.push(s),l.push(i),i=0,r=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},i.prototype._build=function(t,e,i,n){var s,o=i-e+1,a=this._maxEntries;if(o<=a)return r(s=d(t.slice(e,i+1)),this.toBBox),s;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(s=d([])).leaf=!1,s.height=n;var l=Math.ceil(o/a),h=l*Math.ceil(Math.sqrt(a));g(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);g(t,u,c,l,this.compareMinY);for(var f=u;f<=c;f+=l){var _=Math.min(f+l-1,c);s.children.push(this._build(t,f,_,n-1))}}return r(s,this.toBBox),s},i.prototype._chooseSubtree=function(t,e,i,r){for(;r.push(e),!e.leaf&&r.length-1!==i;){for(var n=1/0,s=1/0,o=void 0,a=0;a<e.children.length;a++){var h=e.children[a],u=l(h),c=(Math.max(h.maxX,t.maxX)-Math.min(h.minX,t.minX))*(Math.max(h.maxY,t.maxY)-Math.min(h.minY,t.minY))-u;c<s?(s=c,n=u<n?u:n,o=h):c===s&&u<n&&(n=u,o=h)}e=o||e.children[0]}return e},i.prototype._insert=function(t,e,i){var r=i?t:this.toBBox(t),n=[],o=this._chooseSubtree(r,this.data,e,n);for(o.children.push(t),s(o,r);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(r,n,e)},i.prototype._split=function(t,e){var i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);var o=this._chooseSplitIndex(i,s,n),a=d(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,r(i,this.toBBox),r(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,i){for(var r,s,o,a,h=1/0,u=1/0,c=e;c<=i-e;c++){var d=n(t,0,c,this.toBBox),g=n(t,c,i,this.toBBox),f=(s=void 0,o=void 0,s=Math.max(d.minX,g.minX),o=Math.max(d.minY,g.minY),Math.max(0,Math.min(d.maxX,g.maxX)-s)*Math.max(0,Math.min(d.maxY,g.maxY)-o)),_=l(d)+l(g);f<h?(h=f,r=c,u=_<u?_:u):f===h&&_<u&&(u=_,r=c)}return r||i-e},i.prototype._chooseSplitAxis=function(t,e,i){var r=t.leaf?this.compareMinX:o,n=t.leaf?this.compareMinY:a;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,i,r){t.children.sort(r);for(var o=this.toBBox,a=n(t,0,e,o),l=n(t,i-e,i,o),u=h(a)+h(l),c=e;c<i-e;c++){var d=t.children[c];s(a,t.leaf?o(d):d),u+=h(a)}for(var g=i-e-1;g>=e;g--){var f=t.children[g];s(l,t.leaf?o(f):f),u+=h(l)}return u},i.prototype._adjustParentBBoxes=function(t,e,i){for(var r=i;r>=0;r--)s(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},i}()},66599:function(t,e,i){var r=i(17136),n=i(43770),s=i(11154),o=i(36960);class a extends r.Z{clone(){let t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&t.setGeometry(e.clone());let i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,o.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=(0,o.oL)(t,n.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){let e;this.style_=t,this.styleFunction_=t?"function"==typeof t?t:(Array.isArray(t)?e=t:((0,s.h)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}constructor(t){super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}}e.Z=a},71863:function(t,e,i){i.d(e,{y:function(){return n}});var r=i(64290);function n(t){return Array.isArray(t)?(0,r.BB)(t):t}},32240:function(t,e,i){i.d(e,{Z:function(){return t8}});var r=i(66084),n=i(30450),s=i(90533),o=i(64662),a=i(25988),l=i(33545),h=i(2766),u=i(65183),c=i(40527);class d{clone(){let t=this.getScale();return new d({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,c.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,c.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new a.Z({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}}var g=i(15640),f=i(64290);let _=0,p=1<<_++,m=1<<_++,y=1<<_++,x=1<<_++,S=1<<_++,v=Math.pow(2,_)-1,E={[p]:"boolean",[m]:"number",[y]:"string",[x]:"color",[S]:"number[]"},w=Object.keys(E).map(Number).sort(g.j2);function I(t){let e=[];for(let i of w)(t&i)===i&&e.push(E[i]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}class C{constructor(t,e){this.type=t,this.value=e}}class T{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function R(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function b(t,e,i){switch(typeof t){case"boolean":return new C(p,t);case"number":return new C(m,t);case"string":{let e=y;return(0,f.e1)(t)&&(e|=x),(e&i)!=0&&(e&=i),new C(e,t)}}if(!Array.isArray(t))throw Error("Expression must be an array or a primitive value");if(0===t.length)throw Error("Empty expression");if("string"==typeof t[0])return function(t,e,i){let r=t[0],n=O[r];if(!n)throw Error("Unknown operator: ".concat(r));return n(t,e,i)}(t,e,i);for(let e of t)if("number"!=typeof e)throw Error("Expected an array of numbers");let r=S;return(3===t.length||4===t.length)&&(r|=x),i&&(r&=i),new C(r,t)}let k={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},O={[k.Get]:P(t=>{let[e,i]=t;return void 0!==i?function(t){switch(t){case"string":return y;case"color":return x;case"number":return m;case"boolean":return p;case"number[]":return S;default:throw Error("Unrecognized type hint: ".concat(t))}}(i.value):v},D(1,2),function(t,e){let i=b(t[1],e);if(!(i instanceof C))throw Error("Expected a literal argument for get operation");if("string"!=typeof i.value)throw Error("Expected a string argument for get operation");return(e.properties.add(i.value),3===t.length)?[i,b(t[2],e)]:[i]}),[k.Var]:P(t=>{let[e]=t;return e.type},D(1,1),function(t,e,i,r){let n=t[1];if("string"!=typeof n)throw Error("Expected a string argument for var operation");if(e.variables.add(n),!("variables"in e.style)||void 0===e.style.variables[n])return[new C(v,n)];let s=b(e.style.variables[n],e);if(s.value=n,r&&!(r&s.type))throw Error("The variable ".concat(n," has type ").concat(I(s.type)," but the following type was expected: ").concat(I(r)));return[s]}),[k.Id]:P(m|y,A,function(t,e){e.featureId=!0}),[k.Concat]:P(y,D(2,1/0),M(v)),[k.GeometryType]:P(y,A),[k.Resolution]:P(m,A),[k.Zoom]:P(m,A),[k.Time]:P(m,A),[k.Any]:P(p,D(2,1/0),M(p)),[k.All]:P(p,D(2,1/0),M(p)),[k.Not]:P(p,D(1,1),M(p)),[k.Equal]:P(p,D(2,2),M(v),F),[k.NotEqual]:P(p,D(2,2),M(v),F),[k.GreaterThan]:P(p,D(2,2),M(v),F),[k.GreaterThanOrEqualTo]:P(p,D(2,2),M(v),F),[k.LessThan]:P(p,D(2,2),M(v),F),[k.LessThanOrEqualTo]:P(p,D(2,2),M(v),F),[k.Multiply]:P(t=>{let e=m|x;for(let i=0;i<t.length;i++)e&=t[i].type;return e},D(2,1/0),M(m|x),F),[k.Divide]:P(m,D(2,2),M(m)),[k.Add]:P(m,D(2,1/0),M(m)),[k.Subtract]:P(m,D(2,2),M(m)),[k.Clamp]:P(m,D(3,3),M(m)),[k.Mod]:P(m,D(2,2),M(m)),[k.Pow]:P(m,D(2,2),M(m)),[k.Abs]:P(m,D(1,1),M(m)),[k.Floor]:P(m,D(1,1),M(m)),[k.Ceil]:P(m,D(1,1),M(m)),[k.Round]:P(m,D(1,1),M(m)),[k.Sin]:P(m,D(1,1),M(m)),[k.Cos]:P(m,D(1,1),M(m)),[k.Atan]:P(m,D(1,2),M(m)),[k.Sqrt]:P(m,D(1,1),M(m)),[k.Match]:P(t=>{let e=v;for(let i=2;i<t.length;i+=2)e&=t[i].type;return e&t[t.length-1].type},D(4,1/0),L,function(t,e,i,r){let n=t.length-1,s=b(t[1],e).type,o=b(t[t.length-1],e),a=void 0!==r?r&o.type:o.type,l=Array(n-2);for(let i=0;i<n-2;i+=2){let r=b(t[i+2],e),n=b(t[i+3],e);s&=r.type,a&=n.type,l[i]=r,l[i+1]=n}let h=y|m|p;if(!(h&s))throw Error("Expected an input of type ".concat(I(h)," for the interpolate operation")+", got ".concat(I(s)," instead"));if(0===a)throw Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let i=0;i<n-2;i+=2){let r=b(t[i+2],e,s),n=b(t[i+3],e,a);l[i]=r,l[i+1]=n}return[b(t[1],e,s),...l,b(t[t.length-1],e,a)]}),[k.Between]:P(p,D(3,3),M(m)),[k.Interpolate]:P(t=>{let e=x|m;for(let i=3;i<t.length;i+=2)e&=t[i].type;return e},D(6,1/0),L,function(t,e,i,r){let n;let s=t[1];switch(s[0]){case"linear":n=1;break;case"exponential":if("number"!=typeof(n=s[1]))throw Error("Expected a number base for exponential interpolation"+", got ".concat(JSON.stringify(n)," instead"));break;default:n=null}if(!n)throw Error("Invalid interpolation type: ".concat(JSON.stringify(s)));n=b(n,e);let o=b(t[2],e);if(!(m&o.type))throw Error("Expected an input of type number for the interpolate operation"+", got ".concat(I(o.type)," instead"));o=b(t[2],e,m);let a=Array(t.length-3);for(let i=0;i<a.length;i+=2){let r=b(t[i+3],e);if(!(m&r.type))throw Error("Expected all stop input values in the interpolate operation to be of type number"+", got ".concat(I(r.type)," at position ").concat(i+2," instead"));let n=b(t[i+4],e);if(!((m|x)&n.type))throw Error("Expected all stop output values in the interpolate operation to be a number or color"+", got ".concat(I(n.type)," at position ").concat(i+3," instead"));r=b(t[i+3],e,m),n=b(t[i+4],e,m|x),a[i]=r,a[i+1]=n}return[n,o,...a]}),[k.Case]:P(t=>{let e=v;for(let i=1;i<t.length;i+=2)e&=t[i].type;return e&t[t.length-1].type},D(3,1/0),function(t,e){let i=t[0],r=t.length-1;if(r%2==0)throw Error("An odd amount of arguments was expected for operation ".concat(i,", got ").concat(JSON.stringify(r)," instead"))},function(t,e,i,r){let n=b(t[t.length-1],e),s=void 0!==r?r&n.type:n.type,o=Array(t.length-1);for(let i=0;i<o.length-1;i+=2){let r=b(t[i+1],e),n=b(t[i+2],e);if(!(p&r.type))throw Error("Expected all conditions in the case operation to be of type boolean"+", got ".concat(I(r.type)," at position ").concat(i," instead"));s&=n.type,o[i]=r,o[i+1]=n}if(0===s)throw Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let i=0;i<o.length-1;i+=2)o[i+1]=b(t[i+2],e,s);return o[o.length-1]=b(t[t.length-1],e,s),o}),[k.In]:P(p,D(2,2),function(t,e){let i=t[2];if(!Array.isArray(i))throw Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof i[0]){if("literal"!==i[0])throw Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(i[1]))throw Error('The "in" operator was provided a literal value which was not an array as second argument.');i=i[1]}let r=y|m,n=Array(i.length);for(let t=0;t<n.length;t++){let s=b(i[t],e);r&=s.type,n[t]=s}if(0===r)throw Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[b(t[1],e,r),...n]}),[k.Number]:P(m,D(1,1/0),M(v)),[k.String]:P(y,D(1,1/0),M(v)),[k.Array]:P(t=>3===t.length||4===t.length?S|x:S,D(1,1/0),M(m)),[k.Color]:P(x,D(3,4),M(m)),[k.Band]:P(m,D(1,3),M(m)),[k.Palette]:P(x,D(2,2),function(t,e){let i=b(t[1],e,m);if(i.type!==m)throw Error("The first argument of palette must be an number, got ".concat(I(i.type)," instead"));let r=t[2];if(!Array.isArray(r))throw Error("The second argument of palette must be an array");let n=Array(r.length);for(let t=0;t<n.length;t++){let i=b(r[t],e,x);if(!(i instanceof C))throw Error("The palette color at index ".concat(t," must be a literal value"));if(!(i.type&x))throw Error("The palette color at index ".concat(t," should be of type color, got ").concat(I(i.type)," instead"));n[t]=i}return[i,...n]})};function A(t,e){let i=t[0];if(1!==t.length)throw Error("Expected no arguments for ".concat(i," operation"));return[]}function D(t,e){return function(i,r){let n=i[0],s=i.length-1;if(t===e){if(s!==t)throw Error("Expected ".concat(t," argument").concat(1===t?"":"s"," for ").concat(n,", got ").concat(s))}else if(s<t||s>e){let i=e===1/0?"".concat(t," or more"):"".concat(t," to ").concat(e);throw Error("Expected ".concat(i," arguments for ").concat(n,", got ").concat(s))}}}function M(t){return function(e,i){let r=e[0],n=e.length-1,s=Array(n);for(let o=0;o<n;++o){let n=b(e[o+1],i);if(!(t&n.type)){let e=I(t),i=I(n.type);throw Error("Unexpected type for argument ".concat(o," of ").concat(r," operation")+", got ".concat(e," but expected ").concat(i))}n.type&=t,s[o]=n}return s}}function F(t,e,i){let r=t[0],n=t.length-1,s=v;for(let t=0;t<i.length;++t)s&=i[t].type;if(0===s)throw Error("No common type could be found for arguments of ".concat(r," operation"));let o=Array(n);for(let i=0;i<n;++i)o[i]=b(t[i+1],e,s);return o}function L(t,e){let i=t[0],r=t.length-1;if(r%2==1)throw Error("An even amount of arguments was expected for operation ".concat(i,", got ").concat(JSON.stringify(r)," instead"))}function P(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return function(e,r,n){let s=e[0],o=[];for(let t=0;t<i.length;t++)o=i[t](e,r,o,n)||o;let a="function"==typeof t?t(o):t;if(void 0!==n){if(!(a&n))throw Error("The following expression was expected to return ".concat(I(n),", but returns ").concat(I(a)," instead: ").concat(JSON.stringify(e)));a&=n}if(0===a)throw Error("No matching type was found for the following expression: ".concat(JSON.stringify(e)));return new T(a,s,...o)}}function G(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function W(t,e,i){let r=b(t,i);if(!(e&r.type)){let t=I(e),i=I(r.type);throw Error("Expected expression to be of type ".concat(t,", got ").concat(i))}return function t(e,i){if(e instanceof C){if(e.type===x&&"string"==typeof e.value){let t=(0,f.mL)(e.value);return function(){return t}}return function(){return e.value}}let r=e.operator;switch(r){case k.Number:case k.String:return function(e,i){let r=e.operator,n=e.args.length,s=Array(n);for(let r=0;r<n;++r)s[r]=t(e.args[r],i);switch(r){case k.Number:case k.String:return t=>{for(let e=0;e<n;++e){let i=s[e](t);if(typeof i===r)return i}throw Error("Expected one of the values to be a ".concat(r))};default:throw Error("Unsupported assertion operator ".concat(r))}}(e,i);case k.Get:case k.Var:return function(t,e){let i=t.args[0].value;switch(t.operator){case k.Get:return t=>t.properties[i];case k.Var:return t=>t.variables[i];default:throw Error("Unsupported accessor operator ".concat(t.operator))}}(e,0);case k.Id:return t=>t.featureId;case k.Concat:{let r=e.args.map(e=>t(e,i));return t=>"".concat(...r.map(e=>e(t).toString()))}case k.Resolution:return t=>t.resolution;case k.Any:case k.All:case k.Not:return function(e,i){let r=e.operator,n=e.args.length,s=Array(n);for(let r=0;r<n;++r)s[r]=t(e.args[r],i);switch(r){case k.Any:return t=>{for(let e=0;e<n;++e)if(s[e](t))return!0;return!1};case k.All:return t=>{for(let e=0;e<n;++e)if(!s[e](t))return!1;return!0};case k.Not:return t=>!s[0](t);default:throw Error("Unsupported logical operator ".concat(r))}}(e,i);case k.Equal:case k.NotEqual:case k.LessThan:case k.LessThanOrEqualTo:case k.GreaterThan:case k.GreaterThanOrEqualTo:return function(e,i){let r=e.operator,n=t(e.args[0],i),s=t(e.args[1],i);switch(r){case k.Equal:return t=>n(t)===s(t);case k.NotEqual:return t=>n(t)!==s(t);case k.LessThan:return t=>n(t)<s(t);case k.LessThanOrEqualTo:return t=>n(t)<=s(t);case k.GreaterThan:return t=>n(t)>s(t);case k.GreaterThanOrEqualTo:return t=>n(t)>=s(t);default:throw Error("Unsupported comparison operator ".concat(r))}}(e,i);case k.Multiply:case k.Divide:case k.Add:case k.Subtract:case k.Clamp:case k.Mod:case k.Pow:case k.Abs:case k.Floor:case k.Ceil:case k.Round:case k.Sin:case k.Cos:case k.Atan:case k.Sqrt:return function(e,i){let r=e.operator,n=e.args.length,s=Array(n);for(let r=0;r<n;++r)s[r]=t(e.args[r],i);switch(r){case k.Multiply:return t=>{let e=1;for(let i=0;i<n;++i)e*=s[i](t);return e};case k.Divide:return t=>s[0](t)/s[1](t);case k.Add:return t=>{let e=0;for(let i=0;i<n;++i)e+=s[i](t);return e};case k.Subtract:return t=>s[0](t)-s[1](t);case k.Clamp:return t=>{let e=s[0](t),i=s[1](t);if(e<i)return i;let r=s[2](t);return e>r?r:e};case k.Mod:return t=>s[0](t)%s[1](t);case k.Pow:return t=>Math.pow(s[0](t),s[1](t));case k.Abs:return t=>Math.abs(s[0](t));case k.Floor:return t=>Math.floor(s[0](t));case k.Ceil:return t=>Math.ceil(s[0](t));case k.Round:return t=>Math.round(s[0](t));case k.Sin:return t=>Math.sin(s[0](t));case k.Cos:return t=>Math.cos(s[0](t));case k.Atan:if(2===n)return t=>Math.atan2(s[0](t),s[1](t));return t=>Math.atan(s[0](t));case k.Sqrt:return t=>Math.sqrt(s[0](t));default:throw Error("Unsupported numeric operator ".concat(r))}}(e,i);case k.Match:return function(e,i){let r=e.args.length,n=Array(r);for(let s=0;s<r;++s)n[s]=t(e.args[s],i);return t=>{let e=n[0](t);for(let i=1;i<r;i+=2)if(e===n[i](t))return n[i+1](t);return n[r-1](t)}}(e,i);case k.Interpolate:return function(e,i){let r=e.args.length,n=Array(r);for(let s=0;s<r;++s)n[s]=t(e.args[s],i);return t=>{let e,i;let s=n[0](t),o=n[1](t);for(let a=2;a<r;a+=2){let r=n[a](t),l=n[a+1](t),h=Array.isArray(l);if(h&&(l=(0,f.fG)(l)),r>=o){if(2===a)return l;if(h)return function(t,e,i,r,n,s){if(0==n-i)return r;let o=(0,f.WV)(r),a=(0,f.WV)(s),l=a[2]-o[2];l>180?l-=360:l<-180&&(l+=360);let h=[B(t,e,i,o[0],n,a[0]),B(t,e,i,o[1],n,a[1]),o[2]+B(t,e,i,0,n,l),B(t,e,i,r[3],n,s[3])];return(0,f.Fv)((0,f.TF)(h))}(s,o,e,i,r,l);return B(s,o,e,i,r,l)}e=r,i=l}return i}}(e,i);default:throw Error("Unsupported operator ".concat(r))}}(r,i)}function B(t,e,i,r,n,s){let o=n-i;if(0===o)return r;let a=e-i;return r+(1===t?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1))*(s-r)}var X=i(59367);function Y(t){return!0}function N(t){let e=R(),i=t.length,r=Array(i);for(let n=0;n<i;++n)r[n]=Z(t[n],e);let n=G(),s=Array(i);return function(t,o){if(n.properties=t.getPropertiesInternal(),n.resolution=o,e.featureId){let e=t.getId();void 0!==e?n.featureId=e:n.featureId=null}let a=0;for(let t=0;t<i;++t){let e=r[t](n);e&&(s[a]=e,a+=1)}return s.length=a,s}}function Z(t,e){let i=q(t,"",e),r=z(t,"",e),n=function(t,e){let i="text-",r=J(t,i+"value",e);if(!r)return null;let n=q(t,i,e),s=q(t,i+"background-",e),o=z(t,i,e),a=z(t,i+"background-",e),l=J(t,i+"font",e),h=V(t,i+"max-angle",e),u=V(t,i+"offset-x",e),c=V(t,i+"offset-y",e),g=H(t,i+"overflow",e),f=J(t,i+"placement",e),_=V(t,i+"repeat",e),p=Q(t,i+"scale",e),m=H(t,i+"rotate-with-view",e),y=V(t,i+"rotation",e),x=J(t,i+"align",e),S=J(t,i+"justify",e),v=J(t,i+"baseline",e),E=j(t,i+"padding",e),w=new d({});return function(t){if(w.setText(r(t)),n&&w.setFill(n(t)),s&&w.setBackgroundFill(s(t)),o&&w.setStroke(o(t)),a&&w.setBackgroundStroke(a(t)),l&&w.setFont(l(t)),h&&w.setMaxAngle(h(t)),u&&w.setOffsetX(u(t)),c&&w.setOffsetY(c(t)),g&&w.setOverflow(g(t)),f){let e=f(t);if("point"!==e&&"line"!==e)throw Error("Expected point or line for text-placement");w.setPlacement(e)}if(_&&w.setRepeat(_(t)),p&&w.setScale(p(t)),m&&w.setRotateWithView(m(t)),y&&w.setRotation(y(t)),x){let e=x(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw Error("Expected left, right, center, start, or end for text-align");w.setTextAlign(e)}if(S){let e=S(t);if("left"!==e&&"right"!==e&&"center"!==e)throw Error("Expected left, right, or center for text-justify");w.setJustify(e)}if(v){let e=v(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");w.setTextBaseline(e)}return E&&w.setPadding(E(t)),w}}(t,e),a="icon-src"in t?function(t,e){let i="icon-",r=i+"src",n=tn(t[r],r),s=K(t,i+"anchor",e),o=Q(t,i+"scale",e),a=V(t,i+"opacity",e),h=K(t,i+"displacement",e),u=V(t,i+"rotation",e),d=H(t,i+"rotate-with-view",e),g=tt(t,i+"anchor-origin"),f=te(t,i+"anchor-x-units"),_=te(t,i+"anchor-y-units"),p=function(t,e){let i=t[e];if(void 0!==i)return to(i,e)}(t,i+"color"),m=function(t,e){let i=t[e];if(void 0!==i){if("string"!=typeof i)throw Error("Expected a string for ".concat(e));return i}}(t,i+"cross-origin"),y=function(t,e){let i=t[e];if(void 0!==i)return tr(i,e)}(t,i+"offset"),x=tt(t,i+"offset-origin"),S=$(t,i+"width"),v=$(t,i+"height"),E=function(t,e){let i=t[e];if(void 0!==i){if("number"==typeof i)return(0,c.Pq)(i);if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])throw Error("Expected a number or size array for ".concat(e));return i}}(t,i+"size"),w=ti(t,i+"declutter"),I=new l.Z({src:n,anchorOrigin:g,anchorXUnits:f,anchorYUnits:_,color:p,crossOrigin:m,offset:y,offsetOrigin:x,height:v,width:S,size:E,declutterMode:w});return function(t){return a&&I.setOpacity(a(t)),h&&I.setDisplacement(h(t)),u&&I.setRotation(u(t)),d&&I.setRotateWithView(d(t)),o&&I.setScale(o(t)),s&&I.setAnchor(s(t)),I}}(t,e):"shape-points"in t?function(t,e){let i="shape-",r=i+"points",n=ts(t[r],r),s=q(t,i,e),o=z(t,i,e),a=Q(t,i+"scale",e),l=K(t,i+"displacement",e),u=V(t,i+"rotation",e),c=H(t,i+"rotate-with-view",e),d=$(t,i+"radius"),g=$(t,i+"radius1"),f=$(t,i+"radius2"),_=$(t,i+"angle"),p=ti(t,i+"declutter-mode"),m=new h.Z({points:n,radius:d,radius1:g,radius2:f,angle:_,declutterMode:p});return function(t){return s&&m.setFill(s(t)),o&&m.setStroke(o(t)),l&&m.setDisplacement(l(t)),u&&m.setRotation(u(t)),c&&m.setRotateWithView(c(t)),a&&m.setScale(a(t)),m}}(t,e):"circle-radius"in t?function(t,e){let i="circle-",r=q(t,i,e),n=z(t,i,e),s=V(t,i+"radius",e),a=Q(t,i+"scale",e),l=K(t,i+"displacement",e),h=V(t,i+"rotation",e),u=H(t,i+"rotate-with-view",e),c=ti(t,i+"declutter-mode"),d=new o.Z({radius:5,declutterMode:c});return function(t){return s&&d.setRadius(s(t)),r&&d.setFill(r(t)),n&&d.setStroke(n(t)),l&&d.setDisplacement(l(t)),h&&d.setRotation(h(t)),u&&d.setRotateWithView(u(t)),a&&d.setScale(a(t)),d}}(t,e):null,u=V(t,"z-index",e);if(!i&&!r&&!n&&!a&&!(0,X.x)(t))throw Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));let g=new s.ZP;return function(t){let e=!0;if(i){let r=i(t);r&&(e=!1),g.setFill(r)}if(r){let i=r(t);i&&(e=!1),g.setStroke(i)}if(n){let i=n(t);i&&(e=!1),g.setText(i)}if(a){let i=a(t);i&&(e=!1),g.setImage(i)}return(u&&g.setZIndex(u(t)),e)?null:g}}function q(t,e,i){let r=U(t,e+"fill-color",i);if(!r)return null;let n=new a.Z;return function(t){let e=r(t);return"none"===e?null:(n.setColor(e),n)}}function z(t,e,i){let r=V(t,e+"stroke-width",i),n=U(t,e+"stroke-color",i);if(!r&&!n)return null;let s=J(t,e+"stroke-line-cap",i),o=J(t,e+"stroke-line-join",i),a=j(t,e+"stroke-line-dash",i),l=V(t,e+"stroke-line-dash-offset",i),h=V(t,e+"stroke-miter-limit",i),c=new u.Z;return function(t){if(n){let e=n(t);if("none"===e)return null;c.setColor(e)}if(r&&c.setWidth(r(t)),s){let e=s(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw Error("Expected butt, round, or square line cap");c.setLineCap(e)}if(o){let e=o(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw Error("Expected bevel, round, or miter line join");c.setLineJoin(e)}return a&&c.setLineDash(a(t)),l&&c.setLineDashOffset(l(t)),h&&c.setMiterLimit(h(t)),c}}function V(t,e,i){if(!(e in t))return;let r=W(t[e],m,i);return function(t){return ts(r(t),e)}}function J(t,e,i){if(!(e in t))return null;let r=W(t[e],y,i);return function(t){return tn(r(t),e)}}function H(t,e,i){if(!(e in t))return null;let r=W(t[e],p,i);return function(t){let i=r(t);if("boolean"!=typeof i)throw Error("Expected a boolean for ".concat(e));return i}}function U(t,e,i){if(!(e in t))return null;let r=W(t[e],x|y,i);return function(t){return to(r(t),e)}}function j(t,e,i){if(!(e in t))return null;let r=W(t[e],S,i);return function(t){return tr(r(t),e)}}function K(t,e,i){if(!(e in t))return null;let r=W(t[e],S,i);return function(t){let i=tr(r(t),e);if(2!==i.length)throw Error("Expected two numbers for ".concat(e));return i}}function Q(t,e,i){if(!(e in t))return null;let r=W(t[e],S|m,i);return function(t){return function(t,e){if("number"==typeof t)return t;let i=tr(t,e);if(2!==i.length)throw Error("Expected an array of two numbers for ".concat(e));return i}(r(t),e)}}function $(t,e){let i=t[e];if(void 0!==i){if("number"!=typeof i)throw Error("Expected a number for ".concat(e));return i}}function tt(t,e){let i=t[e];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw Error("Expected bottom-left, bottom-right, top-left, or top-right for ".concat(e));return i}}function te(t,e){let i=t[e];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw Error("Expected pixels or fraction for ".concat(e));return i}}function ti(t,e){let i=t[e];if(void 0!==i){if("string"!=typeof i)throw Error("Expected a string for ".concat(e));if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw Error("Expected declutter, obstacle, or none for ".concat(e));return i}}function tr(t,e){if(!Array.isArray(t))throw Error("Expected an array for ".concat(e));let i=t.length;for(let r=0;r<i;++r)if("number"!=typeof t[r])throw Error("Expected an array of numbers for ".concat(e));return t}function tn(t,e){if("string"!=typeof t)throw Error("Expected a string for ".concat(e));return t}function ts(t,e){if("number"!=typeof t)throw Error("Expected a number for ".concat(e));return t}function to(t,e){if("string"==typeof t)return t;let i=tr(t,e),r=i.length;if(r<3||r>4)throw Error("Expected a color with 3 or 4 values for ".concat(e));return i}let ta={RENDER_ORDER:"renderOrder"};class tl extends r.Z{getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(ta.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new n(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(ta.RENDER_ORDER,t)}setStyle(t){this.style_=function(t){if(void 0===t)return s.yF;if(!t)return null;if("function"==typeof t||t instanceof s.ZP)return t;if(!Array.isArray(t))return N([t]);if(0===t.length)return[];let e=t.length,i=t[0];if(i instanceof s.ZP){let i=Array(e);for(let r=0;r<e;++r){let e=t[r];if(!(e instanceof s.ZP))throw Error("Expected a list of style instances");i[r]=e}return i}if("style"in i){let i=Array(e);for(let r=0;r<e;++r){let e=t[r];if(!("style"in e))throw Error("Expected a list of rules with a style property");i[r]=e}return function(t){let e=R(),i=function(t,e){let i=t.length,r=Array(i);for(let n=0;n<i;++n){let i;let s=t[n],o="filter"in s?W(s.filter,p,e):Y;if(Array.isArray(s.style)){let t=s.style.length;i=Array(t);for(let r=0;r<t;++r)i[r]=Z(s.style[r],e)}else i=[Z(s.style,e)];r[n]={filter:o,styles:i}}return function(e){let n=[],s=!1;for(let o=0;o<i;++o)if((0,r[o].filter)(e)&&(!t[o].else||!s))for(let t of(s=!0,r[o].styles)){let i=t(e);i&&n.push(i)}return n}}(t,e),r=G();return function(t,n){if(r.properties=t.getPropertiesInternal(),r.resolution=n,e.featureId){let e=t.getId();void 0!==e?r.featureId=e:r.featureId=null}return i(r)}}(i)}return N(t)}(t),this.styleFunction_=null===t?void 0:(0,s.J$)(this.style_),this.changed()}constructor(t){let e=Object.assign({},t=t||{});delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}}var th=tl;let tu={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},tc=[tu.FILL],td=[tu.STROKE],tg=[tu.BEGIN_PATH],tf=[tu.CLOSE_PATH];var t_=i(37791);class tp{drawCustom(t,e,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}var tm=tp,ty=i(71863),tx=i(57973),tS=i(76102),tv=i(20441);class tE extends tm{applyPixelRatio(t){let e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatPointCoordinates(t,e){let i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,n=this.coordinates,s=n.length;for(let o=0,a=t.length;o<a;o+=e)r[0]=t[o],r[1]=t[o+1],(0,tx.b8)(i,r)&&(n[s++]=r[0],n[s++]=r[1]);return s}appendFlatLineCoordinates(t,e,i,r,n,s){let o,a,l;let h=this.coordinates,u=h.length,c=this.getBufferedMaxExtent();s&&(e+=r);let d=t[e],g=t[e+1],f=this.tmpCoordinate_,_=!0;for(o=e+r;o<i;o+=r)f[0]=t[o],f[1]=t[o+1],(l=(0,tx.pX)(c,f))!==a?(_&&(h[u++]=d,h[u++]=g,_=!1),h[u++]=f[0],h[u++]=f[1]):l===t_.Z.INTERSECTING?(h[u++]=f[0],h[u++]=f[1],_=!1):_=!0,d=f[0],g=f[1],a=l;return(n&&_||o===e+r)&&(h[u++]=d,h[u++]=g),u}drawCustomCoordinates_(t,e,i,r,n){for(let s=0,o=i.length;s<o;++s){let o=i[s],a=this.appendFlatLineCoordinates(t,e,o,r,!1,!1);n.push(a),e=o}return e}drawCustom(t,e,i,r){let n,s,o,a,l;this.beginGeometry(t,e);let h=t.getType(),u=t.getStride(),c=this.coordinates.length;switch(h){case"MultiPolygon":n=t.getOrientedFlatCoordinates(),a=[];let d=t.getEndss();l=0;for(let t=0,e=d.length;t<e;++t){let e=[];l=this.drawCustomCoordinates_(n,l,d[t],u,e),a.push(e)}this.instructions.push([tu.CUSTOM,c,a,t,i,tv.ug]),this.hitDetectionInstructions.push([tu.CUSTOM,c,a,t,r||i,tv.ug]);break;case"Polygon":case"MultiLineString":o=[],n="Polygon"==h?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),l=this.drawCustomCoordinates_(n,0,t.getEnds(),u,o),this.instructions.push([tu.CUSTOM,c,o,t,i,tv.o1]),this.hitDetectionInstructions.push([tu.CUSTOM,c,o,t,r||i,tv.o1]);break;case"LineString":case"Circle":n=t.getFlatCoordinates(),s=this.appendFlatLineCoordinates(n,0,n.length,u,!1,!1),this.instructions.push([tu.CUSTOM,c,s,t,i,tv.Ml]),this.hitDetectionInstructions.push([tu.CUSTOM,c,s,t,r||i,tv.Ml]);break;case"MultiPoint":n=t.getFlatCoordinates(),(s=this.appendFlatPointCoordinates(n,u))>c&&(this.instructions.push([tu.CUSTOM,c,s,t,i,tv.Ml]),this.hitDetectionInstructions.push([tu.CUSTOM,c,s,t,r||i,tv.Ml]));break;case"Point":n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),s=this.coordinates.length,this.instructions.push([tu.CUSTOM,c,s,t,i]),this.hitDetectionInstructions.push([tu.CUSTOM,c,s,t,r||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[tu.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[tu.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t,e,i;let r=this.hitDetectionInstructions;r.reverse();let n=r.length,s=-1;for(t=0;t<n;++t)(i=(e=r[t])[0])==tu.END_GEOMETRY?s=t:i==tu.BEGIN_GEOMETRY&&(e[2]=t,(0,g.FZ)(this.hitDetectionInstructions,s,t),s=-1)}setFillStrokeStyle(t,e){let i=this.state;if(t){let e=t.getColor();i.fillStyle=(0,ty.y)(e||tS.bL)}else i.fillStyle=void 0;if(e){let t=e.getColor();i.strokeStyle=(0,ty.y)(t||tS.Tx);let r=e.getLineCap();i.lineCap=void 0!==r?r:tS.mb;let n=e.getLineDash();i.lineDash=n?n.slice():tS.X9;let s=e.getLineDashOffset();i.lineDashOffset=s||tS.He;let o=e.getLineJoin();i.lineJoin=void 0!==o?o:tS.rc;let a=e.getWidth();i.lineWidth=void 0!==a?a:tS.yC;let l=e.getMiterLimit();i.miterLimit=void 0!==l?l:tS.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){let e=t.fillStyle,i=[tu.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[tu.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){let i=t.fillStyle;("string"!=typeof i||t.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){let i=t.strokeStyle,r=t.lineCap,n=t.lineDash,s=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,l=t.miterLimit;t.currentStrokeStyle==i&&t.currentLineCap==r&&(n==t.currentLineDash||(0,g.fS)(t.currentLineDash,n))&&t.currentLineDashOffset==s&&t.currentLineJoin==o&&t.currentLineWidth==a&&t.currentMiterLimit==l||(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=s,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[tu.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,tx.d9)(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;(0,tx.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}constructor(t,e,i,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}}var tw=tE;class tI extends tw{drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,s=this.appendFlatPointCoordinates(i,r);this.instructions.push([tu.DRAW_IMAGE,n,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([tu.DRAW_IMAGE,n,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,s=this.appendFlatPointCoordinates(i,r);this.instructions.push([tu.DRAW_IMAGE,n,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([tu.DRAW_IMAGE,n,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){let i=t.getAnchor(),r=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}}class tC extends tw{drawFlatCoordinates_(t,e,i,r){let n=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),o=[tu.MOVE_TO_LINE_TO,n,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,e){let i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0===r||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([tu.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tS.X9,tS.He],tg);let s=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(s,0,s.length,o),this.hitDetectionInstructions.push(td),this.endGeometry(e)}drawMultiLineString(t,e){let i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0===r||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([tu.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tS.X9,tS.He],tg);let s=t.getEnds(),o=t.getFlatCoordinates(),a=t.getStride(),l=0;for(let t=0,e=s.length;t<e;++t)l=this.drawFlatCoordinates_(o,l,s[t],a);this.hitDetectionInstructions.push(td),this.endGeometry(e)}finish(){let t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(td),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(td),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(tg)}constructor(t,e,i,r){super(t,e,i,r)}}var tT=i(73044);class tR extends tw{drawFlatCoordinatess_(t,e,i,r){let n=this.state,s=void 0!==n.fillStyle,o=void 0!==n.strokeStyle,a=i.length;this.instructions.push(tg),this.hitDetectionInstructions.push(tg);for(let n=0;n<a;++n){let s=i[n],a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,s,r,!0,!o),h=[tu.MOVE_TO_LINE_TO,a,l];this.instructions.push(h),this.hitDetectionInstructions.push(h),o&&(this.instructions.push(tf),this.hitDetectionInstructions.push(tf)),e=s}return s&&(this.instructions.push(tc),this.hitDetectionInstructions.push(tc)),o&&(this.instructions.push(td),this.hitDetectionInstructions.push(td)),e}drawCircle(t,e){let i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0===r&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([tu.SET_FILL_STYLE,tS.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([tu.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tS.X9,tS.He]);let s=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,o,!1,!1);let l=[tu.CIRCLE,a];this.instructions.push(tg,l),this.hitDetectionInstructions.push(tg,l),void 0!==i.fillStyle&&(this.instructions.push(tc),this.hitDetectionInstructions.push(tc)),void 0!==i.strokeStyle&&(this.instructions.push(td),this.hitDetectionInstructions.push(td)),this.endGeometry(e)}drawPolygon(t,e){let i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0===r&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([tu.SET_FILL_STYLE,tS.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([tu.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tS.X9,tS.He]);let s=t.getEnds(),o=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(o,0,s,a),this.endGeometry(e)}drawMultiPolygon(t,e){let i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0===r&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([tu.SET_FILL_STYLE,tS.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([tu.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,tS.X9,tS.He]);let s=t.getEndss(),o=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0;for(let t=0,e=s.length;t<e;++t)l=this.drawFlatCoordinatess_(o,l,s[t],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(0!==t){let e=this.coordinates;for(let i=0,r=e.length;i<r;++i)e[i]=(0,tT.uZ)(e[i],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}constructor(t,e,i,r){super(t,e,i,r)}}var tb=i(13591),tk=i(75437);let tO={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class tA extends tw{finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){let i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""===this.text_||!n||!i&&!r)return;let s=this.coordinates,o=s.length,a=t.getType(),l=null,h=t.getStride();if("line"===n.placement&&("LineString"==a||"MultiLineString"==a||"Polygon"==a||"MultiPolygon"==a)){let i;if(!(0,tx.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;if(l=t.getFlatCoordinates(),"LineString"==a)i=[l.length];else if("MultiLineString"==a)i=t.getEnds();else if("Polygon"==a)i=t.getEnds().slice(0,1);else if("MultiPolygon"==a){let e=t.getEndss();i=[];for(let t=0,r=e.length;t<r;++t)i.push(e[t][0])}this.beginGeometry(t,e);let r=n.repeat,u=r?void 0:n.textAlign,c=0;for(let t=0,e=i.length;t<e;++t){let e;e=r?function(t,e,i,r,n){let s=[],o=i,a=0,l=e.slice(i,2);for(;a<t&&o+n<r;){let[i,r]=l.slice(-2),h=e[o+n],u=e[o+n+1],c=Math.sqrt((h-i)*(h-i)+(u-r)*(u-r));if((a+=c)>=t){let e=(t-a+c)/c,d=(0,tk.t7)(i,h,e),g=(0,tk.t7)(r,u,e);l.push(d,g),s.push(l),l=[d,g],a==t&&(o+=n),a=0}else if(a<t)l.push(e[o+n],e[o+n+1]),o+=n;else{let t=c-a,e=(0,tk.t7)(i,h,t/c),d=(0,tk.t7)(r,u,t/c);l.push(e,d),s.push(l),l=[e,d],a=0,o+=n}}return a>0&&s.push(l),s}(r*this.resolution,l,c,i[t],h):[l.slice(c,i[t])];for(let r=0,a=e.length;r<a;++r){let a=e[r],l=0,d=a.length;if(void 0==u){let t=function(t,e,i,r,n){let s,o,a,l,h,u,c,d,g,f=i,_=i,p=0,m=0,y=i;for(s=i;s<r;s+=n){let i=e[s],r=e[s+1];void 0!==l&&(a=Math.sqrt((d=i-l)*d+(g=r-h)*g),void 0!==u&&(m+=o,Math.acos((u*d+c*g)/(o*a))>t&&(m>p&&(p=m,f=y,_=s),m=0,y=s-n)),o=a,u=d,c=g),l=i,h=r}return(m+=a)>p?[y,s]:[f,_]}(n.maxAngle,a,0,a.length,2);l=t[0],d=t[1]}for(let t=l;t<d;t+=h)s.push(a[t],a[t+1]);let g=s.length;c=i[t],this.drawChars_(o,g),o=g}}this.endGeometry(e)}else{let i=n.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),h=2;break;case"Polygon":l=t.getFlatInteriorPoint(),n.overflow||i.push(l[2]/this.resolution),h=3;break;case"MultiPolygon":let r=t.getFlatInteriorPoints();l=[];for(let t=0,e=r.length;t<e;t+=3)n.overflow||i.push(r[t+2]/this.resolution),l.push(r[t],r[t+1]);if(0===l.length)return;h=2}let u=this.appendFlatPointCoordinates(l,h);if(u===o)return;if(i&&(u-o)/2!=l.length/h){let t=o/2;i=i.filter((e,i)=>{let r=s[(t+i)*2]===l[i*h]&&s[(t+i)*2+1]===l[i*h+1];return!r&&--t,r})}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&this.updateFillStyle(this.state,this.createFill),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=n.padding;if(c!=tS.oB&&(n.scale[0]<0||n.scale[1]<0)){let t=n.padding[0],e=n.padding[1],i=n.padding[2],r=n.padding[3];n.scale[0]<0&&(e=-e,r=-r),n.scale[1]<0&&(t=-t,i=-i),c=[t,e,i,r]}let d=this.pixelRatio;this.instructions.push([tu.DRAW_IMAGE,o,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==tS.oB?tS.oB:c.map(function(t){return t*d}),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);let g=1/d,f=this.state.fillStyle;n.backgroundFill&&(this.state.fillStyle=tS.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([tu.DRAW_IMAGE,o,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,void 0,this.declutterImageWithText_,c,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?tS.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),n.backgroundFill&&(this.state.fillStyle=f,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){let t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;!t||r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash});let n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||tS.PH,justify:e.justify,textBaseline:e.textBaseline||tS.ru,scale:e.scale});let s=this.fillKey_;!i||s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle})}drawChars_(t,e){let i=this.textStrokeState_,r=this.textState_,n=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();let a=this.pixelRatio,l=tO[r.textBaseline],h=this.textOffsetY_*a,u=this.text_,c=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([tu.DRAW_CHARS,t,e,l,r.overflow,o,r.maxAngle,a,h,n,c*a,u,s,1]),this.hitDetectionInstructions.push([tu.DRAW_CHARS,t,e,l,r.overflow,o?tS.bL:o,r.maxAngle,a,h,n,c*a,u,s,1/a])}setTextStyle(t,e){let i,r,n;if(t){let e=t.getFill();e?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=(0,ty.y)(e.getColor()||tS.bL)):(r=null,this.textFillState_=r);let s=t.getStroke();if(s){(n=this.textStrokeState_)||(n={},this.textStrokeState_=n);let t=s.getLineDash(),e=s.getLineDashOffset(),i=s.getWidth(),r=s.getMiterLimit();n.lineCap=s.getLineCap()||tS.mb,n.lineDash=t?t.slice():tS.X9,n.lineDashOffset=void 0===e?tS.He:e,n.lineJoin=s.getLineJoin()||tS.rc,n.lineWidth=void 0===i?tS.yC:i,n.miterLimit=void 0===r?tS.V4:r,n.strokeStyle=(0,ty.y)(s.getColor()||tS.Tx)}else n=null,this.textStrokeState_=n;i=this.textState_;let o=t.getFont()||tS.Df;(0,tS.Qx)(o);let a=t.getScaleArray();i.overflow=t.getOverflow(),i.font=o,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||tS.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||tS.oB,i.scale=void 0===a?[1,1]:a;let l=t.getOffsetX(),h=t.getOffsetY(),u=t.getRotateWithView(),c=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==u&&u,this.textRotation_=void 0===c?0:c,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,tb.sq)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,tb.sq)(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[tS.bL]={fillStyle:tS.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}}let tD={Circle:tR,Default:tw,Image:tI,LineString:tC,Polygon:tR,Text:tA};class tM{finish(){let t={};for(let e in this.buildersByZIndex_){t[e]=t[e]||{};let i=this.buildersByZIndex_[e];for(let r in i){let n=i[r].finish();t[e][r]=n}}return t}getBuilder(t,e){let i=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let n=r[e];return void 0===n&&(n=new tD[e](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=n),n}constructor(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}}var tF=i(51045),tL=i(29667),tP=i(57849);let tG=(0,tx.lJ)(),tW=[],tB=[],tX=[],tY=[];function tN(t){return t[3].declutterBox}let tZ=RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function tq(t,e){return"start"===e?e=tZ.test(t)?"right":"left":"end"===e&&(e=tZ.test(t)?"left":"right"),tO[e]}function tz(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}class tV{createLabel(t,e,i,r){let n;let s=t+e+i+r;if(this.labels_[s])return this.labels_[s];let o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,u=[l.scale[0]*h,l.scale[1]*h],c=Array.isArray(t),d=l.justify?tO[l.justify]:tq(Array.isArray(t)?t[0]:t,l.textAlign||tS.PH),g=r&&o.lineWidth?o.lineWidth:0,f=c?t:t.split("\n").reduce(tz,[]),{width:_,height:p,widths:m,heights:y,lineWidths:x}=(0,tS.Zw)(l,f),S=_+g,v=[],E=(S+2)*u[0],w=(p+g)*u[1],I={width:E<0?Math.floor(E):Math.ceil(E),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:v};(1!=u[0]||1!=u[1])&&v.push("scale",u),r&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",g),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset)),i&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");let C=.5-d,T=d*S+C*g,R=[],b=[],k=0,O=0,A=0,D=0;for(let t=0,e=f.length;t<e;t+=2){let e=f[t];if("\n"===e){O+=k,k=0,T=d*S+C*g,++D;continue}let s=f[t+1]||l.font;s!==n&&(r&&R.push("font",s),i&&b.push("font",s),n=s),k=Math.max(k,y[A]);let o=[e,T+C*m[A]+d*(m[A]-x[D]),.5*(g+k)+O];T+=m[A],r&&R.push("strokeText",o),i&&b.push("fillText",o),++A}return Array.prototype.push.apply(v,R),Array.prototype.push.apply(v,b),this.labels_[s]=I,I}replayTextBackground_(t,e,i,r,n,s,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,r,n,s,o,a,l,h,u,c,d,g,f,_){let p;o*=c[0],a*=c[1];let m=i-o,y=r-a,x=n+l>t?t-l:n,S=s+h>e?e-h:s,v=g[3]+x*c[0]+g[1],E=g[0]+S*c[1]+g[2],w=m-g[3],I=y-g[0];return(f||0!==u)&&(tW[0]=w,tY[0]=w,tW[1]=I,tB[1]=I,tB[0]=w+v,tX[0]=tB[0],tX[1]=I+E,tY[1]=tX[1]),0!==u?(p=(0,tL.qC)((0,tL.Ue)(),i,r,1,1,u,-i,-r),(0,tL.nn)(p,tW),(0,tL.nn)(p,tB),(0,tL.nn)(p,tX),(0,tL.nn)(p,tY),(0,tx.T9)(Math.min(tW[0],tB[0],tX[0],tY[0]),Math.min(tW[1],tB[1],tX[1],tY[1]),Math.max(tW[0],tB[0],tX[0],tY[0]),Math.max(tW[1],tB[1],tX[1],tY[1]),tG)):(0,tx.T9)(Math.min(w,w+v),Math.min(I,I+E),Math.max(w,w+v),Math.max(I,I+E),tG),d&&(m=Math.round(m),y=Math.round(y)),{drawImageX:m,drawImageY:y,drawImageW:x,drawImageH:S,originX:l,originY:h,declutterBox:{minX:tG[0],minY:tG[1],maxX:tG[2],maxY:tG[3],value:_},canvasTransform:p,scale:c}}replayImageOrLabel_(t,e,i,r,n,s,o){let a=!!(s||o),l=r.declutterBox,h=t.canvas,u=o?o[2]*r.scale[0]/2:0;return l.minX-u<=h.width/e&&l.maxX+u>=0&&l.minY-u<=h.height/e&&l.maxY+u>=0&&(a&&this.replayTextBackground_(t,tW,tB,tX,tY,s,o),(0,tS._f)(t,r.canvasTransform,n,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){let e=(0,tL.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,r){let n=this.textStates[e],s=this.createLabel(t,e,r,i),o=this.strokeStates[i],a=this.pixelRatio,l=tq(Array.isArray(t)?t[0]:t,n.textAlign||tS.PH),h=tO[n.textBaseline||tS.ru],u=o&&o.lineWidth?o.lineWidth:0,c=s.width/a-2*n.scale[0],d=h*s.height/a+2*(.5-h)*u;return{label:s,anchorX:l*c+2*(.5-l)*u,anchorY:d}}execute_(t,e,i,r,n,s,o,a){let l,h,u,c,d,f,_,p,m,y,x,S,v,E,w,I,C;this.pixelCoordinates_&&(0,g.fS)(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=(0,tP.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,tL.lk)(this.renderedTransform_,i));let T=0,R=r.length,b=0,k=0,O=0,A=null,D=null,M=this.coordinateCache_,F=this.viewRotation_,L=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},G=this.instructions!=r||this.overlaps?0:200;for(;T<R;){let i=r[T];switch(i[0]){case tu.BEGIN_GEOMETRY:E=i[1],C=i[3],E.getGeometry()?void 0===o||(0,tx.kK)(o,C.getExtent())?++T:T=i[2]+1:T=i[2];break;case tu.BEGIN_PATH:k>G&&(this.fill_(t),k=0),O>G&&(t.stroke(),O=0),k||O||(t.beginPath(),d=NaN,f=NaN),++T;break;case tu.CIRCLE:let g=l[b=i[1]],R=l[b+1],W=l[b+2],B=l[b+3],X=W-g,Y=B-R,N=Math.sqrt(X*X+Y*Y);t.moveTo(g+N,R),t.arc(g,R,N,0,2*Math.PI,!0),++T;break;case tu.CLOSE_PATH:t.closePath(),++T;break;case tu.CUSTOM:b=i[1],h=i[2];let Z=i[3],q=i[4],z=6==i.length?i[5]:void 0;P.geometry=Z,P.feature=E,T in M||(M[T]=[]);let V=M[T];z?z(l,b,h,2,V):(V[0]=l[b],V[1]=l[b+1],V.length=2),q(V,P),++T;break;case tu.DRAW_IMAGE:let J,H,U,j;b=i[1],h=i[2],m=i[3],u=i[4],c=i[5];let K=i[6],Q=i[7],$=i[8],tt=i[9],te=i[10],ti=i[11],tr=i[12],tn=i[13],ts=i[14],to=i[15];if(!m&&i.length>=20){y=i[19],x=i[20],S=i[21],v=i[22];let t=this.drawLabelWithPointPlacement_(y,x,S,v);m=t.label,i[3]=m;let e=i[23];u=(t.anchorX-e)*this.pixelRatio,i[4]=u;let r=i[24];c=(t.anchorY-r)*this.pixelRatio,i[5]=c,K=m.height,i[6]=K,tn=m.width,i[13]=tn}i.length>25&&(J=i[25]),i.length>17?(H=i[16],U=i[17],j=i[18]):(H=tS.oB,U=!1,j=!1),te&&L?ti+=F:te||L||(ti-=F);let ta=0;for(;b<h;b+=2){if(J&&J[ta++]<tn/this.pixelRatio)continue;let i=this.calculateImageOrLabelDimensions_(m.width,m.height,l[b],l[b+1],tn,K,u,c,$,tt,ti,tr,n,H,U||j,E),r=[t,e,m,i,Q,U?A:null,j?D:null];if(a){if("none"===ts)continue;if("obstacle"===ts){a.insert(i.declutterBox);continue}{let t,e;if(to){let i=h-b;if(!to[i]){to[i]=r;continue}if(t=to[i],delete to[i],e=tN(t),a.collides(e))continue}if(a.collides(i.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,r)}++T;break;case tu.DRAW_CHARS:let tl;let th=i[1],tc=i[2],td=i[3],tg=i[4];v=i[5];let tf=i[6],t_=i[7],tp=i[8];S=i[9];let tm=i[10];y=i[11],x=i[12];let ty=[i[13],i[13]],tv=this.textStates[x],tE=tv.font,tw=[tv.scale[0]*t_,tv.scale[1]*t_];tE in this.widths_?tl=this.widths_[tE]:(tl={},this.widths_[tE]=tl);let tI=function(t,e,i,r){let n=t[e],s=t[e+1],o=0;for(let a=e+r;a<i;a+=r){let e=t[a],i=t[a+1];o+=Math.sqrt((e-n)*(e-n)+(i-s)*(i-s)),n=e,s=i}return o}(l,th,tc,2),tC=Math.abs(tw[0])*(0,tS.Kd)(tE,y,tl);if(tg||tC<=tI){let i=(tI-tC)*tq(y,this.textStates[x].textAlign),r=function(t,e,i,r,n,s,o,a,l,h,u,c){let d,g,f=t[e],_=t[e+1],p=0,m=0,y=0,x=0;function S(){p=f,m=_,e+=r,f=t[e],_=t[e+1],x+=y,y=Math.sqrt((f-p)*(f-p)+(_-m)*(_-m))}do S();while(e<i-r&&x+y<s);let v=0===y?0:(s-x)/y,E=(0,tk.t7)(p,f,v),w=(0,tk.t7)(m,_,v),I=e-r,C=x,T=s+a*l(h,n,u);for(;e<i-r&&x+y<T;)S();v=0===y?0:(T-x)/y;let R=(0,tk.t7)(p,f,v),b=(0,tk.t7)(m,_,v);if(c){let t=[E,w,R,b];(0,tP.U1)(t,0,4,2,c,t,t),d=t[0]>t[2]}else d=E>R;let k=Math.PI,O=[],A=I+r===e;if(e=I,y=0,x=C,f=t[e],_=t[e+1],A){S(),g=Math.atan2(_-m,f-p),d&&(g+=g>0?-k:k);let t=(R+E)/2,e=(b+w)/2;return O[0]=[t,e,(T-s)/2,g,n],O}n=n.replace(/\n/g," ");for(let t=0,c=n.length;t<c;){S();let E=Math.atan2(_-m,f-p);if(d&&(E+=E>0?-k:k),void 0!==g){let t=E-g;if(Math.abs(t+=t>k?-2*k:t<-k?2*k:0)>o)return null}g=E;let w=t,I=0;for(;t<c;++t){let o=a*l(h,n[d?c-t-1:t],u);if(e+r<i&&x+y<s+I+o/2)break;I+=o}if(t===w)continue;let C=d?n.substring(c-w,c-t):n.substring(w,t);v=0===y?0:(s+I/2-x)/y;let T=(0,tk.t7)(p,f,v),R=(0,tk.t7)(m,_,v);O.push([T,R,I/2,E,C]),s+=I}return O}(l,th,tc,2,y,i,tf,Math.abs(tw[0]),tS.Kd,tE,tl,L?0:this.viewRotation_);t:if(r){let i,n,s,o,l;let h=[];if(S)for(i=0,n=r.length;i<n;++i){s=(l=r[i])[4],o=this.createLabel(s,x,"",S),u=l[2]+(tw[0]<0?-tm:tm),c=td*o.height+(.5-td)*2*tm*tw[1]/tw[0]-tp;let n=this.calculateImageOrLabelDimensions_(o.width,o.height,l[0],l[1],o.width,o.height,u,c,0,0,l[3],ty,!1,tS.oB,!1,E);if(a&&a.collides(n.declutterBox))break t;h.push([t,e,o,n,1,null,null])}if(v)for(i=0,n=r.length;i<n;++i){s=(l=r[i])[4],o=this.createLabel(s,x,v,""),u=l[2],c=td*o.height-tp;let n=this.calculateImageOrLabelDimensions_(o.width,o.height,l[0],l[1],o.width,o.height,u,c,0,0,l[3],ty,!1,tS.oB,!1,E);if(a&&a.collides(n.declutterBox))break t;h.push([t,e,o,n,1,null,null])}a&&a.load(h.map(tN));for(let t=0,e=h.length;t<e;++t)this.replayImageOrLabel_.apply(this,h[t])}}++T;break;case tu.END_GEOMETRY:if(void 0!==s){let t=s(E=i[1],C);if(t)return t}++T;break;case tu.FILL:G?k++:this.fill_(t),++T;break;case tu.MOVE_TO_LINE_TO:for(b=i[1],h=i[2],w=l[b],I=l[b+1],_=w+.5|0,p=I+.5|0,(_!==d||p!==f)&&(t.moveTo(w,I),d=_,f=p),b+=2;b<h;b+=2)w=l[b],I=l[b+1],_=w+.5|0,p=I+.5|0,(b==h-2||_!==d||p!==f)&&(t.lineTo(w,I),d=_,f=p);++T;break;case tu.SET_FILL_STYLE:A=i,this.alignFill_=i[2],k&&(this.fill_(t),k=0,O&&(t.stroke(),O=0)),t.fillStyle=i[1],++T;break;case tu.SET_STROKE_STYLE:D=i,O&&(t.stroke(),O=0),this.setStrokeStyle_(t,i),++T;break;case tu.STROKE:G?O++:t.stroke(),++T;break;default:++T}}k&&this.fill_(t),O&&t.stroke()}execute(t,e,i,r,n,s){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,n,void 0,void 0,s)}executeHitDetection(t,e,i,r,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,n)}constructor(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,tL.Ue)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}}var tJ=i(36793);let tH=["Polygon","Circle","LineString","Image","Text","Default"];class tU{clip(t,e){let i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(let e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);let r=t[e];for(let t in r){let e=r[t];i[t]=new tV(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(let e in this.executorsByZIndex_){let i=this.executorsByZIndex_[e];for(let e=0,r=t.length;e<r;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,r,n,s){let o,a,l,h,u,c,d;let f=2*(r=Math.round(r))+1,_=(0,tL.qC)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),p=!this.hitDetectionContext_;p&&(this.hitDetectionContext_=(0,tJ.E4)(f,f,void 0,{willReadFrequently:!0}));let m=this.hitDetectionContext_;m.canvas.width!==f||m.canvas.height!==f?(m.canvas.width=f,m.canvas.height=f):p||m.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(o=(0,tx.lJ)(),(0,tx.Wj)(o,t),(0,tx.f3)(o,e*(this.renderBuffer_+r),o));let y=function(t){if(void 0!==tj[t])return tj[t];let e=2*t+1,i=t*t,r=Array(i+1);for(let n=0;n<=t;++n)for(let s=0;s<=t;++s){let o=n*n+s*s;if(o>i)break;let a=r[o];a||(a=[],r[o]=a),a.push(((t+n)*e+(t+s))*4+3),n>0&&a.push(((t-n)*e+(t+s))*4+3),s>0&&(a.push(((t+n)*e+(t-s))*4+3),n>0&&a.push(((t-n)*e+(t-s))*4+3))}let n=[];for(let t=0,e=r.length;t<e;++t)r[t]&&n.push(...r[t]);return tj[t]=n,n}(r);function x(t,e){let i=m.getImageData(0,0,f,f).data;for(let o=0,l=y.length;o<l;o++)if(i[y[o]]>0){if(!s||"Image"!==a&&"Text"!==a||s.includes(t)){let i=(y[o]-3)/4,s=r-i%f,a=r-(i/f|0),l=n(t,e,s*s+a*a);if(l)return l}m.clearRect(0,0,f,f);break}}let S=Object.keys(this.executorsByZIndex_).map(Number);for(S.sort(g.j2),l=S.length-1;l>=0;--l){let t=S[l].toString();for(u=this.executorsByZIndex_[t],h=tH.length-1;h>=0;--h)if(void 0!==(c=u[a=tH[h]])&&(d=c.executeHitDetection(m,_,i,x,o)))return d}}getClipCoords(t){let e=this.maxExtent_;if(!e)return null;let i=e[0],r=e[1],n=e[2],s=e[3],o=[i,r,i,s,n,s,n,r];return(0,tP.vT)(o,0,8,2,t,o),o}isEmpty(){return(0,X.x)(this.executorsByZIndex_)}execute(t,e,i,r,n,s,o){let a,l,h,u,c,d;let f=Object.keys(this.executorsByZIndex_).map(Number);for(f.sort(g.j2),this.maxExtent_&&(t.save(),this.clip(t,i)),s=s||tH,o&&f.reverse(),a=0,l=f.length;a<l;++a){let l=f[a].toString();for(h=0,c=this.executorsByZIndex_[l],u=s.length;h<u;++h)void 0!==(d=c[s[h]])&&d.execute(t,e,i,r,n,o)}this.maxExtent_&&t.restore()}constructor(t,e,i,r,n,s){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,tL.Ue)(),this.createExecutors_(n)}}let tj={};var tK=i(2037),tQ=i(16661),t$=i(4555);class t0 extends tm{drawImages_(t,e,i,r){if(!this.image_)return;let n=(0,tP.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,a=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let t=0,e=n.length;t<e;t+=2){let e=n[t]-this.imageAnchorX_,i=n[t+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){let t=e+this.imageAnchorX_,r=i+this.imageAnchorY_;(0,tL.qC)(o,t,r,1,1,l,-t,-r),s.save(),s.transform.apply(s,o),s.translate(t,r),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=a)}drawText_(t,e,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let n=(0,tP.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=r){let t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.save(),s.translate(t-this.textOffsetX_,i-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,t,i),this.textFillState_&&s.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,r,n){let s=this.context_,o=(0,tP.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let a=o.length;n&&(a-=2);for(let t=2;t<a;t+=2)s.lineTo(o[t],o[t+1]);return n&&s.closePath(),i}drawRings_(t,e,i,r){for(let n=0,s=i.length;n<s;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,tx.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=(0,t$.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=this.context_;n.beginPath(),n.arc(e[0],e[1],Math.sqrt(i*i+r*r),0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){let i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,tx.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if((0,tx.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates(),r=0,n=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t)r=this.moveToLineTo_(i,r,n[t],s,!1);e.stroke()}if(""!==this.text_){let e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,tx.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,tx.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,n=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t){let e=n[t];r=this.drawRings_(i,r,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,g.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:tS.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){let e=t.getColor();this.fillState_={fillStyle:(0,ty.y)(e||tS.bL)}}else this.fillState_=null;if(e){let t=e.getColor(),i=e.getLineCap(),r=e.getLineDash(),n=e.getLineDashOffset(),s=e.getLineJoin(),o=e.getWidth(),a=e.getMiterLimit(),l=r||tS.X9;this.strokeState_={lineCap:void 0!==i?i:tS.mb,lineDash:1===this.pixelRatio_?l:l.map(t=>t*this.pixelRatio_),lineDashOffset:(n||tS.He)*this.pixelRatio_,lineJoin:void 0!==s?s:tS.rc,lineWidth:(void 0!==o?o:tS.yC)*this.pixelRatio_,miterLimit:void 0!==a?a:tS.V4,strokeStyle:(0,ty.y)(t||tS.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){let e=t.getFill();if(e){let t=e.getColor();this.textFillState_={fillStyle:(0,ty.y)(t||tS.bL)}}else this.textFillState_=null;let i=t.getStroke();if(i){let t=i.getColor(),e=i.getLineCap(),r=i.getLineDash(),n=i.getLineDashOffset(),s=i.getLineJoin(),o=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:tS.mb,lineDash:r||tS.X9,lineDashOffset:n||tS.He,lineJoin:void 0!==s?s:tS.rc,lineWidth:void 0!==o?o:tS.yC,miterLimit:void 0!==a?a:tS.V4,strokeStyle:(0,ty.y)(t||tS.Tx)}}else this.textStrokeState_=null;let r=t.getFont(),n=t.getOffsetX(),s=t.getOffsetY(),o=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:void 0!==r?r:tS.Df,textAlign:void 0!==u?u:tS.PH,textBaseline:void 0!==c?c:tS.ru},this.text_=void 0!==h?Array.isArray(h)?h.reduce((t,e,i)=>t+=i%2?" ":e,""):h:"",this.textOffsetX_=void 0!==n?this.pixelRatio_*n:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}constructor(t,e,i,r,n,s,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.transformRotation_=r?(0,tk.FH)(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=n,this.squaredTolerance_=s,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,tL.Ue)()}}var t1=i(93456);let t2={Point:function(t,e,i,r,n){let s;let o=i.getImage(),a=i.getText();if(o){if(o.getImageState()!=t1.Z.LOADED)return;let l=t;if(n){let h=o.getDeclutterMode();if("none"!==h){if(l=n,"obstacle"===h){let n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(o,s),n.drawPoint(e,r)}else a&&a.getText()&&(s={})}}let h=l.getBuilder(i.getZIndex(),"Image");h.setImageStyle(o,s),h.drawPoint(e,r)}if(a&&a.getText()){let o=t;n&&(o=n);let l=o.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a,s),l.drawText(e,r)}},LineString:function(t,e,i,r,n){let s=i.getStroke();if(s){let n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,s),n.drawLineString(e,r)}let o=i.getText();if(o&&o.getText()){let s=(n||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,r)}},Polygon:function(t,e,i,r,n){let s=i.getFill(),o=i.getStroke();if(s||o){let n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(s,o),n.drawPolygon(e,r)}let a=i.getText();if(a&&a.getText()){let s=(n||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r)}},MultiPoint:function(t,e,i,r,n){let s;let o=i.getImage(),a=i.getText();if(o){if(o.getImageState()!=t1.Z.LOADED)return;let l=t;if(n){let h=o.getDeclutterMode();if("none"!==h){if(l=n,"obstacle"===h){let n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(o,s),n.drawMultiPoint(e,r)}else a&&a.getText()&&(s={})}}let h=l.getBuilder(i.getZIndex(),"Image");h.setImageStyle(o,s),h.drawMultiPoint(e,r)}if(a&&a.getText()){let o=t;n&&(o=n);let l=o.getBuilder(i.getZIndex(),"Text");l.setTextStyle(a,s),l.drawText(e,r)}},MultiLineString:function(t,e,i,r,n){let s=i.getStroke();if(s){let n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,s),n.drawMultiLineString(e,r)}let o=i.getText();if(o&&o.getText()){let s=(n||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,r)}},MultiPolygon:function(t,e,i,r,n){let s=i.getFill(),o=i.getStroke();if(o||s){let n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(s,o),n.drawMultiPolygon(e,r)}let a=i.getText();if(a&&a.getText()){let s=(n||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r)}},GeometryCollection:function(t,e,i,r,n){let s,o;let a=e.getGeometriesArray();for(s=0,o=a.length;s<o;++s)(0,t2[a[s].getType()])(t,a[s],i,r,n)},Circle:function(t,e,i,r,n){let s=i.getFill(),o=i.getStroke();if(s||o){let n=t.getBuilder(i.getZIndex(),"Circle");n.setFillStrokeStyle(s,o),n.drawCircle(e,r)}let a=i.getText();if(a&&a.getText()){let s=(n||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,r)}}};function t3(t,e){return parseInt((0,tb.sq)(t),10)-parseInt((0,tb.sq)(e),10)}function t5(t,e,i,r,n,s,o){let a=!1,l=i.getImage();if(l){let t=l.getImageState();t==t1.Z.LOADED||t==t1.Z.ERROR?l.unlistenImageChange(n):(t==t1.Z.IDLE&&l.load(),l.listenImageChange(n),a=!0)}return function(t,e,i,r,n,s){let o=i.getGeometryFunction()(e);if(!o)return;let a=o.simplifyTransformed(r,n);i.getRenderer()?function t(e,i,r,n){if("GeometryCollection"==i.getType()){let s=i.getGeometries();for(let i=0,o=s.length;i<o;++i)t(e,s[i],r,n);return}e.getBuilder(r.getZIndex(),"Default").drawCustom(i,n,r.getRenderer(),r.getHitDetectionRenderer())}(t,a,i,e):(0,t2[a.getType()])(t,a,i,e,s)}(t,e,i,r,s,o),a}var t4=i(24143),t6=i(97058);class t7 extends tF.Z{renderWorlds(t,e,i){let r=e.extent,n=e.viewState,s=n.center,o=n.resolution,a=n.projection,l=n.rotation,h=a.getExtent(),u=this.getLayer().getSource(),c=e.pixelRatio,d=e.viewHints,g=!(d[tQ.Z.ANIMATING]||d[tQ.Z.INTERACTING]),f=this.compositionContext_,_=Math.round(e.size[0]*c),p=Math.round(e.size[1]*c),m=u.getWrapX()&&a.canWrapX(),y=m?(0,tx.dz)(h):null,x=m?Math.ceil((r[2]-h[2])/y)+1:1,S=m?Math.floor((r[0]-h[0])/y):0;do{let e=this.getRenderTransform(s,o,l,c,_,p,S*y);t.execute(f,1,e,l,g,void 0,i)}while(++S<x)}setupCompositionContext_(){if(1!==this.opacity_){let t=(0,tJ.E4)(this.context.canvas.width,this.context.canvas.height,tF.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,tJ.jy)(this.compositionContext_),tF.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){let i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];(0,tL.n3)(this.pixelTransform,1/i,1/i),(0,tL.nb)(this.inversePixelTransform,this.pixelTransform);let n=(0,tL.BB)(this.pixelTransform);this.useContainer(e,n,this.getBackground(t));let s=this.context,o=s.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup,h=a&&!a.isEmpty()||l&&!l.isEmpty();if(!h&&!(this.getLayer().hasListener(tK.Z.PRERENDER)||this.getLayer().hasListener(tK.Z.POSTRENDER)))return null;let u=Math.round(t.size[0]*i),c=Math.round(t.size[1]*i);o.width!=u||o.height!=c?(o.width=u,o.height=c,o.style.transform!==n&&(o.style.transform=n)):this.containerReused||s.clearRect(0,0,u,c),this.preRender(s,t);let d=t.viewState,g=d.projection;this.opacity_=r.opacity,this.setupCompositionContext_();let f=!1;if(h&&r.extent&&this.clipping){let e=(0,t4.dY)(r.extent,g);(f=(h=(0,tx.kK)(e,t.extent))&&!(0,tx.r4)(e,t.extent))&&this.clipUnrotated(this.compositionContext_,t,e)}return h&&this.renderWorlds(a,t),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let t=[this.context.canvas.width,this.context.canvas.height];(0,tL.nn)(this.pixelTransform,t);let e=this.renderedCenter_,i=this.renderedResolution_,r=this.renderedRotation_,n=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],h=.5*t[0],u=.5*t[1];a.push(this.getRenderTransform(e,i,r,.5,h,u,0).slice());let c=o.getSource(),d=n.getExtent();if(c.getWrapX()&&n.canWrapX()&&!(0,tx.r4)(d,s)){let t,n=s[0],o=(0,tx.dz)(d),l=0;for(;n<d[0];)t=o*--l,a.push(this.getRenderTransform(e,i,r,.5,h,u,t).slice()),n+=o;for(l=0,n=s[2];n>d[2];)t=o*++l,a.push(this.getRenderTransform(e,i,r,.5,h,u,t).slice()),n-=o}this.hitDetectionImageData_=function(t,e,i,r,n,s,o){let a=.5*t[0],h=.5*t[1],u=(0,tJ.E4)(a,h);u.imageSmoothingEnabled=!1;let c=u.canvas,d=new t0(u,.5,n,null,o),f=i.length,_=Math.floor(16777215/f),p={};for(let t=1;t<=f;++t){let e=i[t-1],o=e.getStyleFunction()||r;if(!o)continue;let a=o(e,s);if(!a)continue;Array.isArray(a)||(a=[a]);let h=(t*_).toString(16).padStart(7,"#00000");for(let t=0,i=a.length;t<i;++t){let i=a[t],r=i.getGeometryFunction()(e);if(!r||!(0,tx.kK)(n,r.getExtent()))continue;let s=i.clone(),o=s.getFill();o&&o.setColor(h);let u=s.getStroke();u&&(u.setColor(h),u.setLineDash(null)),s.setText(void 0);let c=i.getImage();if(c){let t=c.getImageSize();if(!t)continue;let e=(0,tJ.E4)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=h,e.fillRect(0,0,i.width,i.height),s.setImage(new l.Z({img:i,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}let d=s.getZIndex()||0,g=p[d];g||(g={},p[d]=g,g.Polygon=[],g.Circle=[],g.LineString=[],g.Point=[]);let f=r.getType();if("GeometryCollection"===f){let t=r.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){let i=t[e];g[i.getType().replace("Multi","")].push(i,s)}}else g[f.replace("Multi","")].push(r,s)}}let m=Object.keys(p).map(Number).sort(g.j2);for(let t=0,i=m.length;t<i;++t){let i=p[m[t]];for(let t in i){let r=i[t];for(let t=0,i=r.length;t<i;t+=2){d.setStyle(r[t+1]);for(let i=0,n=e.length;i<n;++i)d.setTransform(e[i]),d.drawGeometry(r[t])}}}return u.getImageData(0,0,c.width,c.height)}(t,a,this.renderedFeatures_,o.getStyleFunction(),s,i,r)}e(function(t,e,i){let r=[];if(i){let n=Math.floor(.5*Math.round(t[0])),s=Math.floor(.5*Math.round(t[1])),o=((0,tk.uZ)(n,0,i.width-1)+(0,tk.uZ)(s,0,i.height-1)*i.width)*4,a=i.data[o],l=i.data[o+1],h=i.data[o+2]+256*(l+256*a),u=Math.floor(16777215/e.length);h&&h%u==0&&r.push(e[h/u-1])}return r}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,r,n){let s;if(!this.replayGroup_)return;let o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},u=function(t,e,i){let s=(0,tb.sq)(t),o=h[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return h[s]=!0,n.splice(n.lastIndexOf(o),1),r(t,l,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return h[s]=!0,r(t,l,e);n.push(h[s]={feature:t,layer:l,geometry:e,distanceSq:i,callback:r})}},c=[this.replayGroup_];return this.declutterExecutorGroup&&c.push(this.declutterExecutorGroup),c.some(r=>s=r.forEachFeatureAtCoordinate(t,o,a,i,u,r===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(t=>t.value):null)),s}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let e,i;let r=this.getLayer(),n=r.getSource();if(!n)return!1;let s=t.viewHints[tQ.Z.ANIMATING],o=t.viewHints[tQ.Z.INTERACTING],a=r.getUpdateWhileAnimating(),l=r.getUpdateWhileInteracting();if(this.ready&&!a&&s||!l&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let h=t.extent,u=t.viewState,c=u.projection,d=u.resolution,f=t.pixelRatio,_=r.getRevision(),p=r.getRenderBuffer(),m=r.getRenderOrder();void 0===m&&(m=t3);let y=u.center.slice(),x=(0,tx.f3)(h,p*d),S=x.slice(),v=[x.slice()],E=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!(0,tx.r4)(E,t.extent)){let t=(0,tx.dz)(E),e=Math.max((0,tx.dz)(x)/2,t);x[0]=E[0]-e,x[2]=E[2]+e,(0,t6.Cf)(y,c);let i=(0,tx.Cf)(v[0],c);i[0]<E[0]&&i[2]<E[2]?v.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>E[0]&&i[2]>E[2]&&v.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==_&&this.renderedRenderOrder_==m&&(0,tx.r4)(this.wrappedRenderedExtent_,x))return(0,g.fS)(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let w=new tM(.5*d/f,x,d,f);this.getLayer().getDeclutter()&&(e=new tM(.5*d/f,x,d,f));let I=(0,t4.Cs)();if(I){for(let t=0,e=v.length;t<e;++t){let e=v[t],i=(0,t4.Fj)(e,c);n.loadFeatures(i,(0,t4.on)(d,c),I)}i=(0,t4.WO)(I,c)}else for(let t=0,e=v.length;t<e;++t)n.loadFeatures(v[t],d,c);let C=function(t,e){let i=.5*t/e;return i*i}(d,f),T=!0,R=t=>{let n;let s=t.getStyleFunction()||r.getStyleFunction();if(s&&(n=s(t,d)),n){let r=this.renderFeature(t,C,n,w,i,e);T=T&&!r}},b=(0,t4.Fj)(x,c),k=n.getFeaturesInExtent(b);m&&k.sort(m);for(let t=0,e=k.length;t<e;++t)R(k[t]);this.renderedFeatures_=k,this.ready=T;let O=w.finish(),A=new tU(x,d,f,n.getOverlaps(),O,r.getRenderBuffer());return e&&(this.declutterExecutorGroup=new tU(x,d,f,n.getOverlaps(),e.finish(),r.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=_,this.renderedRenderOrder_=m,this.renderedExtent_=S,this.wrappedRenderedExtent_=x,this.renderedCenter_=y,this.renderedProjection_=c,this.replayGroup_=A,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,r,n,s){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)o=t5(r,t,i[a],e,this.boundHandleStyleImageChange_,n,s)||o;else o=t5(r,t,i,e,this.boundHandleStyleImageChange_,n,s);return o}constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,tx.lJ)(),this.wrappedRenderedExtent_=(0,tx.lJ)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}}class t9 extends th{createRenderer(){return new t7(this)}constructor(t){super(t)}}var t8=t9},63895:function(t,e,i){i.d(e,{Z:function(){return M}});var r=i(71302),n=i(10554),s=i(4372),o=i(43770),a=i(840),l=i(30450),h=i(57973),u=i(13591),c=i(59367);class d{insert(t,e){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,u.sq)(e)]=i}load(t,e){let i=Array(e.length);for(let r=0,n=e.length;r<n;r++){let n=t[r],s=e[r],o={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:s};i[r]=o,this.items_[(0,u.sq)(s)]=o}this.rbush_.load(i)}remove(t){let e=(0,u.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){let i=this.items_[(0,u.sq)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];(0,h.fS)(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let r=0,n=t.length;r<n&&!(i=e(t[r]));r++);return i}isEmpty(){return(0,c.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let e=this.rbush_.toJSON();return(0,h.T9)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){for(let e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}constructor(t){this.rbush_=new l(t),this.items_={}}}var g=i(29667),f=i(73044),_=i(15640),p=i(57166),m=i(24143),y=i(4351),x=i(75437);function S(t,e,i,r,n,s,o){let a,l;let h=(i-e)/r;if(1===h)a=e;else if(2===h)a=e,l=n;else if(0!==h){let s=t[e],o=t[e+1],h=0,u=[0];for(let n=e+r;n<i;n+=r){let e=t[n],i=t[n+1];h+=Math.sqrt((e-s)*(e-s)+(i-o)*(i-o)),u.push(h),s=e,o=i}let c=n*h,d=(0,_.ry)(u,c);d<0?(l=(c-u[-d-2])/(u[-d-1]-u[-d-2]),a=e+(-d-2)*r):a=e+d*r}o=o>1?o:2,s=s||Array(o);for(let e=0;e<o;++e)s[e]=void 0===a?NaN:void 0===l?t[a+e]:(0,x.t7)(t[a+e],t[a+r+e],l);return s}var v=i(88789),E=i(57849);let w=(0,g.Ue)();class I{get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,h.HK)(this.flatCoordinates_):(0,h.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let t=(0,h.qg)(this.getExtent());this.flatInteriorPoints_=(0,p.X)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let t=(0,y.Q3)(this.flatCoordinates_,this.ends_),e=function(t,e,i,r){let n=[],s=(0,h.lJ)();for(let r=0,o=i.length;r<o;++r){let o=i[r];s=(0,h.GN)(t,e,o[0],2),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=o[o.length-1]}return n}(this.flatCoordinates_,0,t,0);this.flatInteriorPoints_=(0,p.U)(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=S(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let t=this.flatCoordinates_,e=0,i=this.ends_;for(let r=0,n=i.length;r<n;++r){let n=i[r],s=S(t,e,n,2,.5);(0,_.l7)(this.flatMidpoints_,s),e=n}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){let e=(t=(0,m.U2)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){let t=(0,h.Cr)(i)/(0,h.Cr)(e);(0,g.qC)(w,i[0],i[3],t,-t,0,0,0),(0,E.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,w,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new I(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,v.qe)((t,e)=>{let i;if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);let r=this.simplifiedGeometry_.getFlatCoordinates();switch(this.type_){case"LineString":r.length=(0,f.dt)(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=(0,f.UJ)(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,i);break;case"Polygon":i=[],r.length=(0,f.Zh)(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,i)}return i&&(this.simplifiedGeometry_=new I(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}constructor(t,e,i,r,n,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=n,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}}I.prototype.getFlatCoordinates=I.prototype.getOrientedFlatCoordinates;var C=i(76831),T={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function R(t,e){return[[-1/0,-1/0,1/0,1/0]]}var b=i(11154),k=i(36960);function O(t,e){return function(i,r,n,s,o){let a=this;!function(t,e,i,r,n,s,o){let a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(i,r,n):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){let t;let r=e.getType();"json"==r?t=JSON.parse(a.responseText):"text"==r?t=a.responseText:"xml"==r?(t=a.responseXML)||(t=new DOMParser().parseFromString(a.responseText,"application/xml")):"arraybuffer"==r&&(t=a.response),t?s(e.readFeatures(t,{extent:i,featureProjection:n}),e.readProjection(t)):o()}else o()},a.onerror=o,a.send()}(t,e,i,r,n,function(t,e){a.addFeatures(t),void 0!==s&&s(t)},o||v.Zn)}}class A extends s.ZP{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class D extends C.Z{addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=(0,u.sq)(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new A(T.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof I||(this.featureChangeKeys_[t]=[(0,k.oL)(e,o.Z.CHANGE,this.handleFeatureChange_,this),(0,k.oL)(e,a.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(void 0!==e.getId()){let t=String(e.getId());if(t in this.idIndex_){if(e instanceof I){let r=this.idIndex_[t];r instanceof I?Array.isArray(r)?r.push(e):this.idIndex_[t]=[r,e]:i=!1}else i=!1}else this.idIndex_[t]=e}return i&&((0,b.h)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],r=[];for(let e=0,r=t.length;e<r;e++){let r=t[e],n=(0,u.sq)(r);this.addToIndex_(n,r)&&i.push(r)}for(let t=0,n=i.length;t<n;t++){let n=i[t],s=(0,u.sq)(n);this.setupChangeEvents_(s,n);let o=n.getGeometry();if(o){let t=o.getExtent();e.push(t),r.push(n)}else this.nullGeometryFeatures_[s]=n}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(T.ADDFEATURE))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new A(T.ADDFEATURE,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(T.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(T.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(n.Z.ADD,t=>{e||(e=!0,this.addFeature(t.element),e=!1)}),t.addEventListener(n.Z.REMOVE,t=>{e||(e=!0,this.removeFeature(t.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(k.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(let t in this.featuresRtree_.forEach(t=>{this.removeFeatureInternal(t)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new A(T.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){let r=i.getGeometry();if(r instanceof I||r.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){let r=i.getGeometry();if(r instanceof I||r.intersectsExtent(t)){let t=e(i);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,c.x)(this.nullGeometryFeatures_)||(0,_.l7)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){return this.featuresRtree_?e&&e.canWrapX()&&this.getWrapX()?[].concat(...(0,h.MV)(t,e).map(t=>this.featuresRtree_.getInExtent(t))):this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],r=t[1],n=null,s=[NaN,NaN],o=1/0,a=[-1/0,-1/0,1/0,1/0];return e=e||v.uX,this.featuresRtree_.forEachInExtent(a,function(t){if(e(t)){let e=t.getGeometry(),l=o;if((o=e instanceof I?0:e.closestPointXY(i,r,s,o))<l){n=t;let e=Math.sqrt(o);a[0]=i-e,a[1]=r-e,a[2]=i+e,a[3]=r+e}}}),n}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=(0,u.sq)(e),r=e.getGeometry();if(r){let t=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);let n=e.getId();if(void 0!==n){let t=n.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new A(T.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return void 0!==e?e in this.idIndex_:(0,u.sq)(t) in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,c.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){let r=this.loadedExtentsRtree_,n=this.strategy_(t,e,i);for(let t=0,s=n.length;t<s;++t){let s=n[t];r.forEachInExtent(s,function(t){return(0,h.r4)(t.extent,s)})||(++this.loadingExtentsCount_,this.dispatchEvent(new A(T.FEATURESLOADSTART)),this.loader_.call(this,s,e,i,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new A(T.FEATURESLOADEND,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new A(T.FEATURESLOADERROR))}),r.insert(s,{extent:s.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e;let i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if((0,h.fS)(i.extent,t))return e=i,!0}),e&&i.remove(e)}removeFeature(t){if(!t)return;let e=(0,u.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=(0,u.sq)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(k.bN),delete this.featureChangeKeys_[e];let r=t.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new A(T.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_){let r=this.idIndex_[i];if(t instanceof I&&Array.isArray(r)&&r.includes(t))r.splice(r.indexOf(t),1);else if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){(0,b.h)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(O(t,this.format_))}constructor(t){let e,i;t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=v.Zn,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,b.h)(this.format_,"`format` must be set when `url` is set"),this.loader_=O(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:R;let n=void 0===t.useSpatialIndex||t.useSpatialIndex;this.featuresRtree_=n?new d:null,this.loadedExtentsRtree_=new d,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(e=t.features).getArray()),n||void 0!==e||(e=new r.Z(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==e&&this.bindFeaturesCollection_(e)}}var M=D},64662:function(t,e,i){var r=i(2766);class n extends r.Z{clone(){let t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}}e.Z=n},25988:function(t,e){class i{clone(){let t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}}e.Z=i},33545:function(t,e,i){i.d(e,{Z:function(){return m}});var r=i(43770),n=i(93456),s=i(61388),o=i(64290),a=i(11154),l=i(54907),h=i(36793),u=i(62845),c=i(77534);let d=null;class g extends l.Z{initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===n.Z.LOADED){d||(d=(0,h.E4)(1,1,void 0,{willReadFrequently:!0})),d.drawImage(this.image_,0,0);try{d.getImageData(0,0,1,1),this.tainted_=!1}catch(t){d=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(r.Z.CHANGE)}handleImageError_(){this.imageState_=n.Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=n.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_){if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=(0,h.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_}return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===n.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=n.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,u.Q9)(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==n.Z.LOADED)return;let e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);let r=i.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=(0,o.XC)(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=i}constructor(t,e,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=void 0===r?n.Z.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}}var f=i(13591);function _(t,e,i,r){return void 0!==i&&void 0!==r?[i/t,r/e]:void 0!==i?i/t:void 0!==r?r/e:1}class p extends s.Z{clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):t=Array.isArray(t=this.getScale())?t.slice():t,new p({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+e[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){let e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=i[0]-e[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==n.Z.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){let t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==n.Z.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(r.Z.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(r.Z.CHANGE,t)}constructor(t){var e,i,r,s;let l,h;let u=void 0!==(t=t||{}).opacity?t.opacity:1;super({opacity:u,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;let d=void 0!==t.img?t.img:null,p=t.src;if((0,a.h)(!(void 0!==p&&d),"`image` and `src` cannot be provided at the same time"),(void 0===p||0===p.length)&&d&&(p=d.src||(0,f.sq)(d)),(0,a.h)(void 0!==p&&p.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,a.h)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?l=n.Z.IDLE:void 0!==d&&(l=d instanceof HTMLImageElement?d.complete?d.src?n.Z.LOADED:n.Z.IDLE:n.Z.LOADING:n.Z.LOADED),this.color_=void 0!==t.color?(0,o._2)(t.color):null,this.iconImage_=(e=p,i=this.crossOrigin_,r=l,s=this.color_,(h=void 0===e?void 0:c.c.get(e,i,s))||(h=new g(d,d instanceof HTMLImageElement?d.src||void 0:e,i,r,s),c.c.set(e,i,s,h)),h),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{let r=this.getImage(1);if(r.width&&r.height)e=r.width,i=r.height;else if(r instanceof HTMLImageElement){this.initialOptions_=t;let e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;let i=this.iconImage_.getSize();this.setScale(_(i[0],i[1],t.width,t.height))};this.listenImageChange(e);return}}void 0!==e&&this.setScale(_(e,i,t.width,t.height))}}}var m=p},61388:function(t,e,i){var r=i(13591),n=i(40527);class s{clone(){let t=this.getScale();return new s({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,r.O3)()}getImage(t){return(0,r.O3)()}getHitDetectionImage(){return(0,r.O3)()}getPixelRatio(t){return 1}getImageState(){return(0,r.O3)()}getImageSize(){return(0,r.O3)()}getOrigin(){return(0,r.O3)()}getSize(){return(0,r.O3)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,n.Pq)(t)}listenImageChange(t){(0,r.O3)()}load(){(0,r.O3)()}unlistenImageChange(t){(0,r.O3)()}constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,n.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}}e.Z=s},2766:function(t,e,i){var r=i(93456),n=i(61388),s=i(64290),o=i(71863),a=i(36793),l=i(76102);class h extends n.Z{clone(){let t=this.getScale(),e=new h({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){let t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){let i=this.renderOptions_,r=(0,a.E4)(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return r.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let r=this.radius_,n=void 0===this.radius2_?r:this.radius2_;if(r<n){let t=r;r=n,n=t}let s=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),o=n*Math.sin(s),a=r-Math.sqrt(n*n-o*o),l=Math.sqrt(o*o+a*a),h=l/o;if("miter"===t&&h<=i)return h*e;let u=e/2/h,c=e/2*(a/l),d=Math.sqrt((r+u)*(r+u)+c*c)-r;if(void 0===this.radius2_||"bevel"===t)return 2*d;let g=r*Math.sin(s),f=n-Math.sqrt(r*r-g*g),_=Math.sqrt(g*g+f*f)/g;return _<=i?2*Math.max(d,_*e/2-n-r):2*d}createRenderOptions(){let t,e=l.mb,i=l.rc,r=0,n=null,s=0,a=0;if(this.stroke_){var h,u,c,d,g,f;t=(0,o.y)(null!==(h=this.stroke_.getColor())&&void 0!==h?h:l.Tx),a=null!==(u=this.stroke_.getWidth())&&void 0!==u?u:l.yC,n=this.stroke_.getLineDash(),s=null!==(c=this.stroke_.getLineDashOffset())&&void 0!==c?c:0,i=null!==(d=this.stroke_.getLineJoin())&&void 0!==d?d:l.rc,e=null!==(g=this.stroke_.getLineCap())&&void 0!==g?g:l.mb,r=null!==(f=this.stroke_.getMiterLimit())&&void 0!==f?f:l.V4}let _=this.calculateLineJoinSize_(i,a,r);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*Math.max(this.radius_,this.radius2_||0)+_),lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:i,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=l.bL),e.fillStyle=(0,o.y)(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),r=0;"string"==typeof i&&(i=(0,s._2)(i)),null===i?r=1:Array.isArray(i)&&(r=4===i.length?i[3]:1),0===r&&(e=(0,a.E4)(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{let r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);let n=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let o=0;o<e;o++){let e=n+o*s,a=o%2==0?i:r;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.bL,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.render()}}e.Z=h},65183:function(t,e){class i{clone(){let t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}}e.Z=i},90533:function(t,e,i){i.d(e,{J$:function(){return l},yF:function(){return u}});var r=i(64662),n=i(25988),s=i(65183),o=i(11154);class a{clone(){var t;let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new a({geometry:null!=e?e:void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:null!==(t=this.getRenderer())&&void 0!==t?t:void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=c,this.geometry_=t}setZIndex(t){this.zIndex_=t}constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=c,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}}function l(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:((0,o.h)("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),i=[t]),e=function(){return i}}return e}let h=null;function u(t,e){if(!h){let t=new n.Z({color:"rgba(255,255,255,0.4)"}),e=new s.Z({color:"#3399CC",width:1.25});h=[new a({image:new r.Z({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return h}function c(t){return t.getGeometry()}e.ZP=a}}]);